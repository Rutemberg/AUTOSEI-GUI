<!DOCTYPE html>
<html>

<head>
  <title>AutoSEI</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

  <!-- Include eel.js - note this file doesn't exist in the 'web' directory -->
  <script type="text/javascript" src="/eel.js"></script>
  </script>

<body>
  <div id="app" style="display: none;">
    <v-app>
      <v-main>
        <v-container fill-height fluid>

          <!-- RELATORIO FINAL -->
          <v-dialog overlay-color="#762051" overlay-opacity="0.25" v-model="dialogRelatorio" persistent max-width="500">
            <v-card>

              <v-toolbar flat color="#762051" dark>
                <v-icon large left>mdi-check-bold</v-icon>Inserção finalizada com sucesso
              </v-toolbar>
              <v-card-text>
                <v-list v-for="dadosr in dadosrelatorio">
                  <v-subheader>Relatório</v-subheader>
                  <v-list-item-group v-model="selectedItem" color="primary">
                    <v-list-item>
                      <v-list-item-icon>
                        <v-icon color="#762051">mdi-format-list-text</v-icon>
                      </v-list-item-icon>
                      <v-list-item-content>
                        <v-list-item-title>Disciplina(s)
                          processadas: <b style="color: #762051;">{{dadosr.totaldisciplinas}}</b></v-list-item-title>
                      </v-list-item-content>
                    </v-list-item>
                    <v-list-item>
                      <v-list-item-icon>
                        <v-icon color="#762051">mdi-animation-play-outline</v-icon>
                      </v-list-item-icon>
                      <v-list-item-content>
                        <v-list-item-title>Video(s) processados: <b style="color: #762051;">{{dadosr.totalvideos}}</b>
                        </v-list-item-title>
                      </v-list-item-content>
                    </v-list-item>
                    <v-list-item>
                      <v-list-item-icon>
                        <v-icon color="#762051">mdi-format-list-checks</v-icon>
                      </v-list-item-icon>
                      <v-list-item-content>
                        <v-list-item-title>Disciplina(s)
                          inseridas: <b style="color: #762051;">{{dadosr.totalDinseridas}}</b></v-list-item-title>
                      </v-list-item-content>
                    </v-list-item>
                    <v-list-item>
                      <v-list-item-icon>
                        <v-icon color="#762051">mdi-video-off-outline</v-icon>
                      </v-list-item-icon>
                      <v-list-item-content>
                        <v-list-item-title>Disciplina(s) sem videos: <b style="color: #762051;">{{dadosr.faltam}}</b>
                        </v-list-item-title>
                      </v-list-item-content>
                    </v-list-item>
                    <v-list-item>
                      <v-list-item-icon>
                        <v-icon color="#762051">mdi-clock-outline</v-icon>
                      </v-list-item-icon>
                      <v-list-item-content>
                        <v-list-item-title><b style="color: #762051;">{{dadosr.tempo}}</b></v-list-item-title>
                      </v-list-item-content>
                    </v-list-item>
                  </v-list-item-group>
                </v-list>
              </v-card-text>
              <v-card-actions>
                <v-spacer></v-spacer>
                <v-btn color="#762051" text @click="fecharRelatorio()">
                  Ok
                </v-btn>
              </v-card-actions>

            </v-card>
          </v-dialog>
          <!-- RELATORIO FINAL -->


          <!-- CONTEUDO -->
          <v-row align="center" justify="center" fluid fill-height>
            <v-col cols=10 align="center">

              <!-- LOGOTIPO -->
              <transition name="list">
                <v-banner outlined="false" style="z-index: 100;" app single-line color="white" v-if="titulo">
                  <h1 class="text-h2" id="titulo"><b style="color: #762051;">AUTO</b>SEI</h1>
                </v-banner>
              </transition>
              <br>
              <!-- LOGOTIPO -->

              <!-- TIME LINE -->
              <transition name="list">
                <v-timeline v-if="timeline">
                  <transition-group name="list">
                    <v-timeline-item v-for="logDisciplina in logDisciplinas" :key="logDisciplina.codigo" small>
                      <template v-slot:icon>
                        <v-avatar v-if="logDisciplina.video == true" color="#762051">
                          <v-icon dark>mdi-video-outline</v-icon>
                        </v-avatar>
                        <v-avatar v-else color="error">
                          <v-icon dark>mdi-video-off-outline</v-icon>
                        </v-avatar>
                      </template>
                      <template v-slot:opposite>
                        <span>{{logDisciplina.nome}}</span>
                      </template>
                      <v-card class="elevation-2">

                        <v-card-title class="headline">
                          {{logDisciplina.disciplina}}
                        </v-card-title>

                        <v-card-text>

                          <v-list dense>

                            <v-subheader>
                              <transition name="list">
                                <div v-for="semana in semanainserida" :key="semana.codigo"
                                  v-if="semana.codigo == logDisciplina.codigo">
                                  <template v-if="semana.inserida == true">
                                    SEMANA JÁ INSERIDA
                                  </template>
                                  <template v-else-if="semana.inserida == false && logDisciplina.video == true">
                                    INSERINDO VIDEOS
                                  </template>
                                </div>

                                <div v-if="logDisciplina.video == false">
                                  VIDEOS INDISPONIVEIS
                                </div>
                              </transition>
                            </v-subheader>


                            <transition-group name="list">
                              <v-list-item-group v-for="logVideo in logVideos" :key="logVideo" color="primary">
                                <v-list-item v-if="logVideo.codigo == logDisciplina.codigo">
                                  <v-list-item-icon>
                                    <v-icon color="success">mdi-video-check</v-icon>
                                  </v-list-item-icon>
                                  <v-list-item-content class="text-left">
                                    <v-list-item-title>{{logVideo.titulo}}</v-list-item-title>
                                  </v-list-item-content>
                                </v-list-item>
                              </v-list-item-group>
                            </transition-group>
                          </v-list>

                        </v-card-text>
                      </v-card>
                    </v-timeline-item>
                  </transition-group>
                </v-timeline>
              </transition>
              <!-- TIME LINE -->



              <!-- <template>
                <v-timeline>
                  <v-timeline-item v-for="n in 4" :key="n" small>
                    <template v-slot:icon>
                      <v-avatar color="error">
                        <v-icon dark>mdi-video-outline</v-icon>
                      </v-avatar>
                    </template>
                    <template v-slot:opposite>
                      <span>Tus eu perfecto</span>
                    </template>
                    <v-card class="elevation-2">
                      <v-card-title class="headline">
                        Lorem ipsum
                      </v-card-title>
                      <v-card-text>

                        <v-list dense>
                          <v-subheader>VIDEOS</v-subheader>
                          <v-list-item-group color="primary">
                            <v-list-item>
                              <v-list-item-icon>
                                <v-icon color="success">mdi-video-check</v-icon>
                              </v-list-item-icon>
                              <v-list-item-content class="text-left">
                                <v-list-item-title>teste</v-list-item-title>
                              </v-list-item-content>
                            </v-list-item>
                            <v-list-item>
                              <v-list-item-icon>
                                <v-icon color="success">mdi-video-check</v-icon>
                              </v-list-item-icon>
                              <v-list-item-content class="text-left">
                                <v-list-item-title>teste</v-list-item-title>
                              </v-list-item-content>
                            </v-list-item>
                          </v-list-item-group>
                      </v-card-text>
                    </v-card>
                  </v-timeline-item>
                </v-timeline>
              </template> -->

            </v-col>
          </v-row>
          <!-- CONTEUDO -->


          <!-- APP BOTTOM -->
          <transition name="list">
            <v-app-bar elevation="0" v-if="appbar" dense :color="colorbar" fixed bottom>

              <v-spacer></v-spacer>


              <!-- MENU -->
              <v-speed-dial v-if="menu" v-model="fab" transition="scroll-x-reverse-transition">
                <template v-slot:activator>
                  <v-btn v-model="fab" depressed dark large color="#762051">
                    <v-icon left v-if="fab">
                      mdi-close
                    </v-icon>
                    <v-icon left v-else>
                      mdi-video
                    </v-icon>
                    Videos
                  </v-btn>
                </template>
                <v-tooltip left>
                  <template v-slot:activator="{ on, attrs }">
                    <v-btn v-bind="attrs" v-on="on" fab dark color="#762051">
                      <v-icon>mdi-play-box</v-icon>
                    </v-btn>
                  </template>
                  <span>Inserir disciplina especifica</span>
                </v-tooltip>
                <v-tooltip left>
                  <template v-slot:activator="{ on, attrs }">
                    <v-btn v-bind="attrs" v-on="on" fab dark color="#762051" @click="carregardisciplinas">
                      <v-icon>mdi-animation-play</v-icon>
                    </v-btn>
                  </template>
                  <span>Inserir tudo</span>
                </v-tooltip>
              </v-speed-dial>
              <!-- MENU -->

              <!-- BARRA DE PROGRESSO -->
              <v-progress-linear v-if="progresso" v-model="power" color="#762051" height="18" dark>
                <template v-if="logDisciplinas.length != disciplinas.length">
                  <strong>{{ logDisciplinas.length }} de {{disciplinas.length}}</strong>
                </template>
                <template v-else>
                  <strong>Completo</strong>
                </template>
              </v-progress-linear>
              <!-- BARRA DE PROGRESSO -->

            </v-app-bar>
          </transition>
          <!-- APP BOTTOM -->


          <!-- DIALOGO DE CONFIG DE DISCIPLINAS -->
          <v-dialog v-model="dialog" fullscreen hide-overlay transition="dialog-bottom-transition">

            <v-card>

              <v-toolbar dark color="#762051">
                <v-btn icon dark @click="dialog = false">
                  <v-icon>mdi-close</v-icon>
                </v-btn>
                <v-toolbar-title>Configurações "{{configuracoes.semana}}"</v-toolbar-title>
                <v-spacer></v-spacer>
                <v-btn rounded dark color="transparent" elevation="0" @click="iniciar('Sim')">
                  <v-icon left>mdi-play</v-icon>
                  iniciar
                </v-btn>
              </v-toolbar>

              <!-- INFO DISCIPLINAS -->
              <v-banner app single-line color="white" ripple>
                <v-icon color="#762051" slot="icon" size="36">
                  mdi-information
                </v-icon>
                Disciplinas encontradas: <strong>{{contar(disciplinas)}}</strong>
                <br>
                Videos a serem processados: <strong>{{contarvideos(disciplinas,false)}}</strong>
                <br>
                Disciplinas sem videos: <strong>{{contarvideos(disciplinas,true)}}</strong>
              </v-banner>
              <!-- INFO DISCIPLINAS -->


              <v-card elevation="0" class="d-flex flex-wrap justify-center flex ma-10">
                <v-card class="mx-auto mb-5" width="500" v-for="disciplina in disciplinas"
                  :key="disciplina.codigo_conteudo">
                  <v-card-title primary-title>
                    {{ disciplina.nome_disciplina }}
                  </v-card-title>
                  <v-card-subtitle>
                    {{ disciplina.professor }}
                  </v-card-subtitle>
                  <v-card-text>
                    <v-chip v-if="disciplina.videos[0].frame != ''">
                      <v-avatar left>
                        {{ contar(disciplina.videos) }}
                      </v-avatar>
                      Videos
                    </v-chip>
                    <v-chip v-else color="error">
                      <v-avatar left>
                        0
                      </v-avatar>
                      Videos
                    </v-chip>
                  </v-card-text>
                </v-card>
              </v-card>

            </v-card>
          </v-dialog>
          <!-- DIALOGO DE CONFIG DE DISCIPLINAS -->


        </v-container>
      </v-main>
    </v-app>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
  <script src="index.js"></script>

  <style>
    @font-face {
      font-family: neuro;
      src: url("fonts/neuropol-x-bold-2.ttf");
    }

    html {
      overflow-y: auto;
    }

    #titulo {
      font-family: "neuro" !important;
      color: #5B525E;
    }

    .list-enter-active,
    .list-leave-active {
      transition: all 1s;
    }

    .list-enter

    /* .list-leave-active below version 2.1.8 */
      {
      opacity: 0;
      transform: translateY(30px);
    }

    .list-leave-to {
      opacity: 0;
      transform: translateY(-30px);
    }
  </style>
</body>

</html>